<div class="container">
  <div class="processing" *ngIf="orders&&orders.length" >
      <h3 i18n>Commande en cours</h3>
      En cours {{orders[0].oid}},  {{orders[0].getProgress()}}%, 
      <span class="text-right">livraison le {{orders[0].shipping.when|date:'EEE d MMM y'}}</span>
      <mdc-linear-progress style="display:block"></mdc-linear-progress>
  </div>

  <h3 i18n>Mes dernières commandes</h3>

  <mdc-list border="true" [lines]="2">
    <mdc-list-item *ngFor="let order of orders" >
      <mdc-list-item-graphic>
          <mdc-icon class="lime">{{(order.payment.status=='paid')?'check_box':'check_box_outline_blank'}}</mdc-icon>                 
      </mdc-list-item-graphic>
      <mdc-list-item-text >             
          <span>{{order.oid}}</span> statut {{order.payment.status}} <span>{{order.payment.issuer}}</span>           
          <mdc-list-item-secondary>
              Livraison {{order.getShippingPrice()|currency:'CHF'}} - Réduction {{order.getTotalDiscount()|currency:'CHF'}}<br/>Annulation {{order.getFulfilledFailure()}} - Problème {{order.getFulfilledIssue().length}}
          </mdc-list-item-secondary>               
      </mdc-list-item-text>  
      <mdc-list-item-meta class="text-right">
          <div class="align-right bold">{{order.getTotalPrice()|currency:'CHF'}}</div>
          <div style="flex:2 0 100%">{{order.shipping.when|date:'EEE d MMM y'}}</div>
      </mdc-list-item-meta>                    
    </mdc-list-item>
  </mdc-list>


  <h3 i18n>Mes produits</h3>
  <mdc-list [lines]="2" avatar="true" border="true" interactive="false">
    <mdc-list-item *ngFor="let rank of getItems()" (click)="onSelect($event,rank.item)">
      <mdc-list-item-graphic>
        <div class="avatar"
              [ngStyle]="{'background-image': 'url(' + getThumbnail(rank.item) + ')'}">

        </div>
      </mdc-list-item-graphic>
      <mdc-list-item-text>{{rank.item.title}}
      </mdc-list-item-text>
      
      <mdc-list-item-meta>
        <div class="score">
            {{rank.score}}
        </div>
      </mdc-list-item-meta>
    </mdc-list-item>    
  </mdc-list>
  

  <!-- <table class="table">
    <tr *ngFor="let order of orders ; let i=index" >
      <td>
        <table class="table">
          <tr>
            <td class="bg-success text-white rank">
              {{order?.rank}}
            </td>
            <td style="background-color: #efefef">
              created at {{order?.created}}
            </td>
            <td *ngIf="order?.closed!==undefined" style="background-color: #efefef">
              closed at {{order?.closed}}
            </td>
          </tr>
        </table>
        <h2>Items</h2>
        <table class="table">
          <tr>
            <td>Title:</td>
            <td>Quantity:</td>
            <td>Price:</td>
            <td>Total Price:</td>
          </tr>
          <tr *ngFor=" let it of order.items">
            <td> {{it?.title}}</td>
            <td> {{it?.quantity}}</td>
            <td> {{it?.price}}</td>
            <td> {{it?.finalprice}}</td>
          </tr>
          <tr>
            <td>
              Sub total
            </td>
            <td></td><td></td>
            <td>
              {{order?.getSubTotal(order)}}
            </td>
          </tr>
          <tr>
            <td>
              Shipping
            </td>
            <td></td><td></td>
            <td>
                {{order?.getShippingPrice()}}
            </td>
          </tr>
          <tr>
            <td>
              Total
            </td>
            <td></td><td></td>
            <td>
                {{order?.getTotalPrice()}}
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table> -->
</div>
