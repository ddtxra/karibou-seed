<!-- MODAL CONTENT -->
<router-outlet name="modal"></router-outlet>

<!-- NAVIGATION  -->
<mdc-drawer-temporary #menu [absolute]="true" >
  <mdc-drawer-header>
      Header goes here
  </mdc-drawer-header>
  <mdc-drawer-content >
    <mdc-list-group>
      <mdc-list *ngFor="let menu of getMenus()">
        <a mdc-list-item *ngFor="let item of getMenuItems(menu)" [routerLink]="['.'+item.url]">
          <mdc-icon mdc-list-item-graphic>home</mdc-icon>
          <span [innerHTML]="item.name.fr" ></span>
        </a>
        <mdc-list-divider></mdc-list-divider>
      </mdc-list>
    </mdc-list-group>
  </mdc-drawer-content>
</mdc-drawer-temporary>

<!-- CART SIDEBAR -->
<mdc-drawer-temporary #cart [absolute]="true" dir="rtl" class="right">
  <mdc-drawer-content dir="ltr">
    <kng-cart></kng-cart>
  </mdc-drawer-content>
</mdc-drawer-temporary>

<!-- MAIN LAYOUT -->
<div fxLayout="row" [hidden]="!isAppReady()">
  <mdc-toolbar
    #toolbar
    [flexible]="!isMobile()"
    [fixed]="true"
    [waterfall]="false"
    [fixedLastrow]="true" 
    (change)="handleToolbarChange($event)">
    <!-- howto set image  -->
    <!-- [ngStyle]="{'background-image': 'url(' + image + ')'}" -->
    <mdc-toolbar-row class="mdc-toolbar__row--with-image" #section>
      <mdc-toolbar-section [alignStart]="true" >
        <button mdc-toolbar-menu-icon material-icon (click)="toggleMenu();" >menu</button>
        <mdc-toolbar-title>{{title}}</mdc-toolbar-title>      
      </mdc-toolbar-section>
      <!-- SEARCH SECTION -->
      <mdc-toolbar-section mdc-search-bar mdc-ripple>
      </mdc-toolbar-section>    
      <!-- RIGHT MENU SECTION -->
      <mdc-toolbar-section [alignEnd]="true" >
        <div mdc-menu-anchor>
          <button mdc-toolbar-menu-icon (click)="menu.open()" class="btn-shipping">
              <i material-icon class="primary">update</i><span class="hide-md" [class.primary]="isMobile()">Prochaines livraisons</span>
          </button>
          <mdc-menu #menu (select)="handleMenuSelect($event)" [anchorCorner]="'bottom-start'">
            <mdc-menu-item id="0" *ngFor="let day of getShippingDays()">
                {{day|date:'EEEE d MMMM':'':'fr'}}&nbsp;
                <mdc-icon mdc-list-item-meta>info</mdc-icon>                
            </mdc-menu-item>
            <mdc-menu-divider></mdc-menu-divider>
            <mdc-menu-item>
                <!-- <h5 i18n>Ouverture</h5> -->
                <div class="align-days">
                  <div class="label-shipping" *ngFor="let day of getShippingWeek()">
                  {{day.label}} <span class="bullet {{day.state}}"></span>
                </div>
              </div>
            </mdc-menu-item>
          </mdc-menu>
        </div>       
        <button mdc-toolbar-menu-icon material-icon class="mat-toolbar--open-search ">search</button>
         
      </mdc-toolbar-section>
      
    </mdc-toolbar-row>

    <mdc-toolbar-row class="mdc-toolbar__row--with-tabs" >
      <mdc-toolbar-section [alignStart]="true" >
      </mdc-toolbar-section>
      <mdc-toolbar-section class="tabs" [shrinkToFit]="true">
        <mdc-tab-bar [secondary]="true" >
          <mdc-tab [routerLink]="['/store/'+store]" routerLinkActive #rla [active]="rla.isActive">
            Favoris
          </mdc-tab>
          <mdc-tab [routerLink]="['/store/'+store+'/departement']" routerLinkActive #rla [active]="rla.isActive">
            DÃ©partements
          </mdc-tab>
          <mdc-tab [routerLink]="['/store/'+store+'/shops']" routerLinkActive #rla [active]="rla.isActive">
            Boutiques
          </mdc-tab>
        </mdc-tab-bar>          
      </mdc-toolbar-section>
      <mdc-toolbar-section [alignEnd]="true" >
        <button mdc-toolbar-icon class="primary" (click)="toggleCart();"><i  material-icon>shopping_cart</i><span class="hide-md">Panier</span></button>
      </mdc-toolbar-section>
    </mdc-toolbar-row>
  </mdc-toolbar>

  <div class="mdc-content">
    <router-outlet></router-outlet>
  </div>
</div>
